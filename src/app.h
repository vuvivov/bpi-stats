#pragma once
#include<memory>
#include<string>

class dataRetriever;
class priceDatabase;
class statisticsManager;
class printer;
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///An abstract class as a framework for a command line application, which can process and display price statistics.
///Derived classes would have details of the application, such as different statistics, data source, output format, etc.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
class app
{
protected:
	///pointers to major components of the application
	std::shared_ptr<dataRetriever> m_dataRetriever;
	std::shared_ptr<priceDatabase> m_priceDatabase;
	std::shared_ptr<statisticsManager> m_statisticsManager;
	std::shared_ptr<printer> m_printer;
	std::shared_ptr<std::ostream> m_out;
public:
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///Main execution routine
	///@param argc: number of arguments for program execution
	///@param argv: pointers to arguments for program execution
	///@return: none
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void run(int argc, const char** argv);

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///Help information for user
	///@return: help information as a string
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	virtual std::string helpInfo();
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///An instance of the application set up according to requirements by Bluzelle.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
class appForBluzelle : public app
{
public:
	appForBluzelle();
};